const callBackBlocks=document.querySelectorAll(".block-callback-form");callBackBlocks.forEach((e=>{const a=e.getAttribute("id");document.getElementById(a).addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("callback-name-"+a).value,c=document.getElementById("callback-phone-"+a).value,l=document.getElementById("callback-type-"+a).value,n=document.getElementById("callback-comment-"+a),o=n?n.value:"",m=new FormData;m.append("name",t),m.append("phone",c),m.append("type",l),o.trim()&&m.append("comment",o),m.append("action","callback_request"),fetch("/wp-admin/admin-ajax.php",{method:"POST",body:m}).then((e=>e.json())).then((e=>{alert("Заявка отправлена! Имя: "+t+", Телефон: "+c);var a=document.querySelector(".vacancy-callback.block-callback-form");a&&(a.style.display="none")})).catch((e=>{console.error("Ошибка:",e),alert("Произошла ошибка при отправке заявки.")}))}))}));
var callbackVacancyButtons=document.querySelectorAll(".button-vacancy");callbackVacancyButtons.forEach((c=>{c.addEventListener("click",(function(){document.querySelector(".vacancy-callback.block-callback-form").style.display="block"}));const a=document.getElementById("closeCallbackFormVacancy");a&&a.addEventListener("click",(function(){document.querySelector(".vacancy-callback.block-callback-form").style.display="none"}))}));
$(document).ready((function(){var t,a,n;t=$(".quantity-arrow-minus"),a=$(".quantity-arrow-plus"),n=$(".input-text.qty.text"),t.length&&a.length&&n.length&&(t.on("click",(function(t){var a;t.preventDefault(),(a=parseInt(n.val()))>1&&n.val(a-1)})),a.on("click",(function(t){var a;t.preventDefault(),a=parseInt(n.val()),n.val(a+1)})))})),$(document).ready((function(t){function a(){t.ajax({url:custom_ajax_obj.ajax_url,type:"post",data:{action:"update_cart_count"},success:function(a){t(".cart-count").text(a.data.cart_count)},error:function(t,a,n){console.error("Update cart count error:",a,n)}})}t(".ajax_add_to_cart").on("click",(function(n){n.preventDefault();var o=t(this),r={action:"woocommerce_ajax_add_to_cart",product_id:o.data("product-id")||o.closest("form").data("product_id"),quantity:o.siblings(".quantity").find(".qty").val()||1};return t.ajax({type:"POST",url:custom_ajax_obj.ajax_url,data:r,beforeSend:function(){o.addClass("loading")},complete:function(){o.removeClass("loading")},success:function(t){t.error&&t.product_url?window.location=t.product_url:(o.find(".add-to-cart-text").text("В корзине"),o.addClass("in-basket"),a())},error:function(t,a,n){console.error("AJAX error:",a,n)}}),!1})),t(".quantity-arrow-minus").click((function(){var a=t(this).siblings(".quantity").find(".qty"),n=parseInt(a.val());!isNaN(n)&&n>1&&a.val(n-1)})),t(".quantity-arrow-plus").click((function(){var a=t(this).siblings(".quantity").find(".qty"),n=parseInt(a.val());isNaN(n)||a.val(n+1)})),t(document).on("updated_cart_totals",(function(){a(),console.log("Cart totals updated.")}))}));
document.getElementById("callbackButton").addEventListener("click",(function(){document.getElementById("callbackForm").style.display="block"})),document.getElementById("closeCallbackForm").addEventListener("click",(function(){document.getElementById("callbackForm").style.display="none"})),document.getElementById("callbackRequestForm").addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("callback-name").value,n=document.getElementById("callback-phone").value,a=document.getElementById("callback-type").value,l=new FormData;l.append("name",t),l.append("phone",n),l.append("type",a),l.append("action","callback_request"),fetch("/wp-admin/admin-ajax.php",{method:"POST",body:l}).then((e=>e.json())).then((e=>{alert("Запрос на обратный звонок отправлен! Имя: "+t+", Телефон: "+n),document.getElementById("callbackForm").style.display="none"})).catch((e=>{console.error("Ошибка:",e),alert("Произошла ошибка при отправке запроса.")}))}));
$(document).ready((function(e){var a,l,o;a=window.location.href,l=e('a[href="#catalog"]'),o=e("#block-catalog"),a.includes("#catalog")&&l.length?(l.addClass("selected-item-menu"),o.addClass("visible")):(l.removeClass("selected-item-menu"),o.removeClass("visible")),e('a[href="#catalog"]').on("click",(function(a){a.preventDefault();var l=e(this),o=e("#block-catalog");e("#main-header").addClass("header-not-fixed"),l.addClass("selected-item-menu"),o.addClass("display_block"),setTimeout((()=>{o.addClass("visible")}),200),history.pushState(null,null,"#catalog")})),e("#close-catalog-menu").on("click",(function(a){a.preventDefault();var l=e('a[href="#catalog"]'),o=e("#block-catalog");l.removeClass("selected-item-menu"),o.removeClass("visible"),setTimeout((()=>{o.removeClass("display_block")}),500),history.pushState(null,null,window.location.pathname+window.location.search)})),e("#close-catalog-menu-back").on("click",(function(a){a.preventDefault();var l=e("#block-catalog");l.removeClass("visible"),setTimeout((()=>{l.removeClass("display_block")}),500),history.pushState(null,null,window.location.pathname+window.location.search),e("#main-header").removeClass("header-not-fixed")}))})),$(document).ready((function(){$("#burger-menu").click((function(){$(this).toggleClass("active"),$("#site-navigation").toggleClass("visible")}))})),$(document).ready((function(e){function a(a){a.preventDefault(),e("#catalog-sidebar").removeClass("visible-mobile")}e("#show-catalog-sidebar").on("click",(function(a){a.preventDefault(),e("#catalog-sidebar").addClass("visible-mobile")})),e("#close-catalog-sidebar").on("click",a),e("#close-catalog-sidebar-x").on("click",a)})),$(document).ready((function(){$('a[href="#uslugi"]').on("click",(function(e){e.preventDefault();var a=$(".sub-menu");a.hasClass("show")?a.removeClass("show"):a.addClass("show")}))}));
//# sourceMappingURL=../sourcemaps/main.min.js.map
