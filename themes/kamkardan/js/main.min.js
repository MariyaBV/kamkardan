$(document).ready((function(){$(".block-callback-form").each((function(){const a=$(this),c=a.attr("id");a.on("submit",(function(a){a.preventDefault();const e=$(`#callback-name-${c}`).val(),l=$(`#callback-phone-${c}`).val(),t=$(`#callback-type-${c}`).val(),n=$(`#callback-comment-${c}`),o=n.length?n.val():"",r=new FormData;r.append("name",e),r.append("phone",l),r.append("type",t),o.trim()&&r.append("comment",o),r.append("action","callback_request"),fetch("/wp-admin/admin-ajax.php",{method:"POST",body:r}).then((a=>a.text())).then((a=>{try{const c=JSON.parse(a);if(!c.success)throw new Error(c.data);$(".block-callback-form__thanks").addClass("active"),$(".block-callback-form__block form").hide(),$(".vacancy-callback.block-callback-form").hide(),$("#callbackFormThanks").show()}catch(a){console.error("Ошибка при парсинге JSON:",a),alert("Ошибка при обработке ответа от сервера.")}})).catch((a=>{console.error("Ошибка:",a),alert("Произошла ошибка при отправке заявки.")}))}))}))}));
$(document).ready((function(){$(".button-vacancy").on("click",(function(){$(".vacancy-callback.block-callback-form").show()})),$("#closeCallbackFormVacancy").on("click",(function(){$(".vacancy-callback.block-callback-form").hide()})),$(document).mouseup((function(c){var a=$(".vacancy-callback.block-callback-form .callback-form-block form");a.is(c.target)||0!==a.has(c.target).length||$(".vacancy-callback.block-callback-form").hide()}))}));
function validatePhone(t){return/^(\+7|8)\d{10}$/.test(t)}function validateEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}$(document).ready((function(){var t,a,n;t=$(".quantity-arrow-minus"),a=$(".quantity-arrow-plus"),n=$(".input-text.qty.text"),t.length&&a.length&&n.length&&(t.on("click",(function(t){var a;t.preventDefault(),a=parseInt(n.val()),console.log(a),a>1&&n.val(a-1)})),a.on("click",(function(t){var a;t.preventDefault(),a=parseInt(n.val()),console.log(a),n.val(a+1)})))})),$(document).ready((function(t){function a(){t.ajax({url:custom_ajax_obj.ajax_url,type:"post",data:{action:"update_cart_count"},success:function(a){t(".cart-count").text(a.data.cart_count)},error:function(t,a,n){console.error("Update cart count error:",a,n)}})}t(".ajax_add_to_cart").on("click",(function(n){n.preventDefault();var o=t(this),r={action:"woocommerce_ajax_add_to_cart",product_id:o.data("product-id")||o.closest("form").data("product_id"),quantity:o.siblings(".quantity").find(".qty").val()||1};return t.ajax({type:"POST",url:custom_ajax_obj.ajax_url,data:r,beforeSend:function(){o.addClass("loading")},complete:function(){o.removeClass("loading")},success:function(t){t.error&&t.product_url?window.location=t.product_url:(o.find(".add-to-cart-text").text("В корзине"),o.addClass("in-basket"),a())},error:function(t,a,n){console.error("AJAX error:",a,n)}}),!1})),t(".quantity-arrow-minus").click((function(){var a=t(this).siblings(".quantity").find(".qty"),n=parseInt(a.val());!isNaN(n)&&n>1&&a.val(n-1)})),t(".quantity-arrow-plus").click((function(){var a=t(this).siblings(".quantity").find(".qty"),n=parseInt(a.val());isNaN(n)||a.val(n+1)})),t(document).on("updated_cart_totals",(function(){a(),console.log("Cart totals updated.")}))}));
$(document).ready((function(){var e,t;$(".custom-ordering .custom-ordering-trigger").on("click",(function(){$(this).closest(".custom-ordering-select").toggleClass("opened")})),$(".custom-ordering-option").on("click",(function(){var e=$(this),t=e.data("value"),s=e.text().trim(),n=e.closest(".custom-ordering-select").find(".custom-ordering-trigger");n.text(s);var o=e.closest("form");o.find('input[name="orderby"]').val(t),$(".custom-ordering-option").removeClass("selected"),e.addClass("selected"),""===t||"Сортировать"===s?n.removeClass("selected"):n.addClass("selected"),o.submit()})),$(document).on("click",(function(e){$(e.target).closest(".custom-ordering-select").length||$(".custom-ordering-select").removeClass("opened")})),e=$(".custom-ordering").find('input[name="orderby"]').val(),t=$(".custom-ordering-trigger"),""===e||"Сортировать"===t.text().trim()?t.removeClass("selected"):t.addClass("selected")})),$(document).ready((function(){function e(){$(".attribute-filters__select").each((function(){const e=$(this),t=e.find(".reset-button"),s=e.find(".vertical-line"),n=e.find(".icon-Down-3"),o=e.find(".custom-select-trigger");""!==e.find('input[type="hidden"]').val().trim()?(e.addClass("option-selected"),t.css("display","block"),s.css("display","block"),n.css("display","none"),o.addClass("selected-item-menu")):(e.removeClass("option-selected"),t.css("display","none"),s.css("display","none"),n.css("display","block"),o.removeClass("selected-item-menu"))}))}$(".custom-select-trigger").on("click",(function(){$(this).parents(".custom-select").toggleClass("opened")})),$(document).on("click",(function(e){$(e.target).closest(".custom-select").length||$(".custom-select").removeClass("opened")})),$(".custom-option").on("click",(function(){var t=$(this),s=t.closest(".attribute-filters__select"),n=t.data("value"),o=t.text().trim();s.find(".custom-select-trigger").text(o),s.find('input[type="hidden"]').val(n),t.addClass("selected").siblings().removeClass("selected"),s.find(".custom-select").removeClass("opened"),e()})),e(),$(".reset-button").on("click",(function(){const t=$(this).closest(".attribute-filters__select"),s=t.find(".custom-select-trigger").data("attribute-label");t.find('input[type="hidden"]').val(""),t.find(".custom-select-trigger").text(s),t.find(".custom-option").removeClass("selected"),e()})),function(e){let t=window.location.href;new MutationObserver((()=>{const s=window.location.href;s!==t&&(t=s,e())})).observe(document,{subtree:!0,childList:!0})}(e)})),$(document).ready((function(){function e(){const e=new URLSearchParams(window.location.search);let t=0;return e.forEach((function(e,s){(s.startsWith("attribute_")||"min_length"===s||"max_length"===s)&&""!==e&&t++})),t}function t(){const t=e();$(".fillters-count").text(t)}t(),window.addEventListener("popstate",(function(){t()})),$(document).ajaxComplete((function(){t()}))}));
jQuery(document).ready((function(a){a("#callbackButton").on("click",(function(){a("#callbackForm").show()})),a("#callbackButtonCart").on("click",(function(){a("#callbackForm").show()})),a("#closeCallbackForm").on("click",(function(){a("#callbackForm").hide()})),a(document).mouseup((function(c){var l=a("#callbackRequestForm");l.is(c.target)||0!==l.has(c.target).length||a("#callbackForm").hide()})),a("#callbackRequestForm").on("submit",(function(c){c.preventDefault();var l=a("#callback-name").val(),e=a("#callback-phone").val(),n=a("#callback-type").val(),o=new FormData;o.append("name",l),o.append("phone",e),o.append("type",n),o.append("action","callback_request"),fetch("/wp-admin/admin-ajax.php",{method:"POST",body:o}).then((a=>a.json())).then((c=>{a("#callbackRequestFormThanks").show(),a("#closeCallbackForm").trigger("click"),a("#OKCallbackFormThanks").on("click",(function(){a("#callbackRequestFormThanks").hide()})),a("#callbackForm").hide()})).catch((a=>{console.error("Ошибка:",a)}))}))}));
window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".tel").forEach((function(e){var t;function n(e){e.keyCode&&(t=e.keyCode);var n=this.selectionStart;n<1&&8!==e.keyCode&&46!==e.keyCode&&e.preventDefault();var i="+_ (___) ___ ____",l=0,a=(i.replace(/\D/g,""),this.value.replace(/\D/g,"")),s=i.replace(/[_\d]/g,(function(e){return l<a.length?a.charAt(l++):e}));-1!=(l=s.indexOf("_"))&&(s=s.slice(0,l));var r=i.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(r=new RegExp("^"+r+"$")).test(this.value)||this.value.length<2||t>47&&t<58)&&(this.value=s),"blur"==e.type&&this.value.length<2&&(this.value=""),n<this.value.length&&this.setSelectionRange(n,n)}e.addEventListener("input",n,!1),e.addEventListener("focus",n,!1),e.addEventListener("blur",n,!1),e.addEventListener("keydown",n,!1),e.addEventListener("keydown",(function(e){0==this.selectionStart&&this.selectionEnd==this.value.length&&(this.value="")}),!1),e.addEventListener("input",(function(e){""===this.value&&(this.value="+")}),!1)}))}));
$(document).ready((function(){var e,s,l;e=window.location.href,s=$('a[href="#catalog"]'),l=$("#block-catalog"),$("#main-header"),e.includes("#catalog")&&s.length?(s.addClass("selected-item-menu"),l.addClass("visible")):(s.removeClass("selected-item-menu"),l.removeClass("visible")),$('a[href="#catalog"]').on("click",(function(e){e.preventDefault();var s=$(this),l=$("#block-catalog");s.addClass("selected-item-menu"),l.addClass("display_block"),setTimeout((()=>{l.addClass("visible")}),200),history.pushState(null,null,"#catalog")})),$("#close-catalog-menu").on("click",(function(e){e.preventDefault();var s=$('a[href="#catalog"]'),l=$("#block-catalog");s.removeClass("selected-item-menu"),l.removeClass("visible"),setTimeout((()=>{l.removeClass("display_block")}),500),history.pushState(null,null,window.location.pathname+window.location.search)})),$("#close-catalog-menu-back").on("click",(function(e){e.preventDefault();var s=$("#block-catalog");s.removeClass("visible"),setTimeout((()=>{s.removeClass("display_block")}),500),history.pushState(null,null,window.location.pathname+window.location.search)})),$("#burger-menu").click((function(){$(this).toggleClass("active"),$("#site-navigation").toggleClass("visible");var e=$(".sub-menu");e.hasClass("show")&&(e.removeClass("show"),$(this).removeClass("selected-item-menu"));var s=$("#block-catalog");s.hasClass("visible")&&(s.removeClass("visible"),history.pushState(null,null,window.location.pathname+window.location.search))}))})),$(document).ready((function(e){function s(s){s.preventDefault(),e("#catalog-sidebar").removeClass("visible-mobile")}e("#show-catalog-sidebar").on("click",(function(s){s.preventDefault(),e("#catalog-sidebar").addClass("visible-mobile")})),e("#close-catalog-sidebar").on("click",s),e("#close-catalog-sidebar-x").on("click",s)})),$(document).ready((function(){$('a[href="#uslugi"]').on("click",(function(e){e.preventDefault();var s=$(this).closest(".menu-item-has-children").find("ul.sub-menu");s.hasClass("show")?(s.removeClass("show"),$(this).removeClass("selected-item-menu")):($(".sub-menu").removeClass("show"),$("a.selected-item-menu").removeClass("selected-item-menu"),s.addClass("show"),$(this).addClass("selected-item-menu"))})),$("#site-navigation").on("click","#close-menu-back",(function(e){e.preventDefault();var s=$(this).closest(".menu-item-has-children").find("ul.sub-menu"),l=$(this).closest(".menu-item-has-children").find("a.selected-item-menu");s.removeClass("show"),l.removeClass("selected-item-menu")}))})),$(document).ready((function(){$("#block-sort-mobile-button").click((function(){$("#block-sort").addClass("visible"),$("#overlay").addClass("visible"),$("#close-ordering-menu").click((function(e){e.preventDefault(),$("#block-sort").removeClass("visible"),$("#overlay").removeClass("visible")}))})),$("#overlay").on("click",(function(e){var s=$("#block-sort");s.is(e.target)||0!==s.has(e.target).length||($("#overlay").removeClass("visible"),s.removeClass("visible"))}))}));
$(document).ready((function(){new Swiper(".product-gallery-swiper-mobile",{direction:"horizontal",slidesPerView:3,slidesPerGroup:3,spaceBetween:10,height:88,loop:!0,navigation:{nextEl:".product-gallery__swiper-button-next-mobile",prevEl:".product-gallery__swiper-button-prev-mobile"},on:{init:function(){e(this)},resize:function(){e(this)}}});function e(e){e.slides.length<=3?($(e.navigation.nextEl).hide(),$(e.navigation.prevEl).hide()):($(e.navigation.nextEl).show(),$(e.navigation.prevEl).show())}}));
//# sourceMappingURL=../sourcemaps/main.min.js.map
