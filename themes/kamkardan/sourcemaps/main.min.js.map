{"version":3,"sources":["custom.js","header.js"],"names":["$","document","ready","$quantityArrowMinus","$quantityArrowPlus","$quantityNum","length","on","event","currentValue","preventDefault","parseInt","val","updateCartCount","ajax","url","custom_ajax_obj","ajax_url","type","data","action","success","response","text","cart_count","error","jqXHR","textStatus","errorThrown","console","e","$thisButton","this","product_id","closest","quantity","siblings","find","beforeSend","addClass","complete","removeClass","product_url","window","location","click","$qty","currentVal","isNaN","log","getElementById","addEventListener","style","display","name","value","phone","FormData","append","fetch","method","body","then","json","result","alert","catch"],"mappings":"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","file":"../components/main.min.js","sourcesContent":["$(document).ready(function () {\n    function quantityProducts() {\n        var $quantityArrowMinus = $(\".quantity-arrow-minus\");\n        var $quantityArrowPlus = $(\".quantity-arrow-plus\");\n        var $quantityNum = $(\".input-text.qty.text\");\n\n        if ($quantityArrowMinus.length && $quantityArrowPlus.length && $quantityNum.length) {\n            $quantityArrowMinus.on(\"click\", function (event) {\n                event.preventDefault();\n                quantityMinus();\n            });\n\n            $quantityArrowPlus.on(\"click\", function (event) {\n                event.preventDefault();\n                quantityPlus();\n            });\n        }\n\n        function quantityMinus() {\n            var currentValue = parseInt($quantityNum.val());\n            if (currentValue > 1) {\n                $quantityNum.val(currentValue - 1);\n            }\n        }\n\n        function quantityPlus() {\n            var currentValue = parseInt($quantityNum.val());\n            $quantityNum.val(currentValue + 1);\n        }\n    }\n\n    quantityProducts();\n});\n\n// Обработчик для кнопки \"Купить\"\n$(document).ready(function ($) {\n    $('.ajax_add_to_cart').on('click', function (e) {\n        e.preventDefault();\n\n        var $thisButton = $(this);\n        var product_id = $thisButton.data('product-id') || $thisButton.closest('form').data('product_id');\n        var quantity = $thisButton.siblings('.quantity').find('.qty').val() || 1;\n\n        var data = {\n            action: 'woocommerce_ajax_add_to_cart',\n            product_id: product_id,\n            quantity: quantity,\n        };\n\n        $.ajax({\n            type: 'POST',\n            url: custom_ajax_obj.ajax_url,\n            data: data,\n            beforeSend: function () {\n                $thisButton.addClass('loading');\n            },\n            complete: function () {\n                $thisButton.removeClass('loading');\n            },\n            success: function (response) {\n                if (response.error && response.product_url) {\n                    window.location = response.product_url;\n                    return;\n                } else {\n                    // Изменяем текст кнопки на \"В корзине\"\n                    $thisButton.find('.add-to-cart-text').text('В корзине');\n                    $thisButton.addClass('in-basket');\n                    // Обновление количества товаров в корзине\n                    updateCartCount();\n                }\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error('AJAX error:', textStatus, errorThrown);\n            }\n        });\n\n        return false;\n    });\n\n    // Обработчики для кнопок увеличения и уменьшения количества\n    $('.quantity-arrow-minus').click(function () {\n        var $qty = $(this).siblings('.quantity').find('.qty');\n        var currentVal = parseInt($qty.val());\n        if (!isNaN(currentVal) && currentVal > 1) {\n            $qty.val(currentVal - 1);\n        }\n    });\n\n    $('.quantity-arrow-plus').click(function () {\n        var $qty = $(this).siblings('.quantity').find('.qty');\n        var currentVal = parseInt($qty.val());\n        if (!isNaN(currentVal)) {\n            $qty.val(currentVal + 1);\n        }\n    });\n\n    // Обновление корзины при изменении количества\n    function updateCartCount() {\n        $.ajax({\n            url: custom_ajax_obj.ajax_url,\n            type: 'post',\n            data: {\n                action: 'update_cart_count'\n            },\n            success: function (response) {\n                $('.cart-count').text(response.data.cart_count);\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error('Update cart count error:', textStatus, errorThrown);\n            }\n        });\n    }\n\n    // Добавляем событие на обновление корзины после изменения количества товаров\n    $(document).on('updated_cart_totals', function () {\n        updateCartCount();\n        console.log(\"Cart totals updated.\");\n    });\n});\n\n","document.getElementById('callbackButton').addEventListener('click', function() {\n    document.getElementById('callbackForm').style.display = 'block';\n});\n\ndocument.getElementById('closeCallbackForm').addEventListener('click', function() {\n    document.getElementById('callbackForm').style.display = 'none';\n});\n\ndocument.getElementById('callbackRequestForm').addEventListener('submit', function(event) {\n    event.preventDefault();\n    \n    var name = document.getElementById('callback-name').value;\n    var phone = document.getElementById('callback-phone').value;\n    \n    var data = new FormData();\n    data.append('name', name);\n    data.append('phone', phone);\n    data.append('action', 'callback_request');\n    \n    fetch('/wp-admin/admin-ajax.php', {\n        method: 'POST',\n        body: data\n    })\n    .then(response => response.json())\n    .then(result => {\n        alert('Запрос на обратный звонок отправлен! Имя: ' + name + ', Телефон: ' + phone);\n        document.getElementById('callbackForm').style.display = 'none';\n    })\n    .catch(error => {\n        console.error('Ошибка:', error);\n        alert('Произошла ошибка при отправке запроса.');\n    });\n});\n"]}