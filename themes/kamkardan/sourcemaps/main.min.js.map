{"version":3,"sources":["callback.js","callbackvacancy.js","custom.js","header.js"],"names":["callBackBlocks","document","querySelectorAll","forEach","callBackBlock","callBackBlockID","getAttribute","getElementById","addEventListener","event","preventDefault","name","value","phone","type","commentElement","comment","data","FormData","append","trim","fetch","method","body","then","response","json","result","alert","vacancyBlock","querySelector","style","display","catch","error","console","callbackVacancyButtons","callbackVacancyButton","closeButton","$","ready","$quantityArrowMinus","$quantityArrowPlus","$quantityNum","length","on","currentValue","parseInt","val","updateCartCount","ajax","url","custom_ajax_obj","ajax_url","action","success","text","cart_count","jqXHR","textStatus","errorThrown","e","$thisButton","this","product_id","closest","quantity","siblings","find","beforeSend","addClass","complete","removeClass","product_url","window","location","click","$qty","currentVal","isNaN","log"],"mappings":"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","file":"../components/main.min.js","sourcesContent":["const callBackBlocks = document.querySelectorAll('.block-callback-form');\n\ncallBackBlocks.forEach(callBackBlock => {\n    const callBackBlockID = callBackBlock.getAttribute('id');\n\n    document.getElementById(callBackBlockID).addEventListener('submit', function(event) {\n        event.preventDefault();\n\n        var name = document.getElementById('callback-name-'+callBackBlockID).value;\n        var phone = document.getElementById('callback-phone-'+callBackBlockID).value;\n        var type = document.getElementById('callback-type-'+callBackBlockID).value;\n\n        var commentElement = document.getElementById('callback-comment-'+callBackBlockID);\n        var comment = commentElement ? commentElement.value : '';\n        \n        var data = new FormData();\n        data.append('name', name);\n        data.append('phone', phone);\n        data.append('type', type);\n        if (comment.trim()) {\n            data.append('comment', comment);\n        }\n        data.append('action', 'callback_request');\n        \n        fetch('/wp-admin/admin-ajax.php', {\n            method: 'POST',\n            body: data\n        })\n        .then(response => response.json())\n        .then(result => {\n            alert('Заявка отправлена! Имя: ' + name + ', Телефон: ' + phone);\n            var vacancyBlock = document.querySelector('.vacancy-callback.block-callback-form');\n            if (vacancyBlock) {\n                vacancyBlock.style.display = 'none';\n            }\n        })\n        .catch(error => {\n            console.error('Ошибка:', error);\n            alert('Произошла ошибка при отправке заявки.');\n        });\n    });\n});\n","var callbackVacancyButtons = document.querySelectorAll('.button-vacancy');\n\ncallbackVacancyButtons.forEach(callbackVacancyButton => { \n    callbackVacancyButton.addEventListener('click', function() {\n        document.querySelector(`.vacancy-callback.block-callback-form`).style.display = 'block';\n    });\n\n    const closeButton = document.getElementById('closeCallbackFormVacancy');\n    if (closeButton) {\n        closeButton.addEventListener('click', function() {\n            document.querySelector(`.vacancy-callback.block-callback-form`).style.display = 'none';\n        });\n    }\n});\n","$(document).ready(function () {\n    function quantityProducts() {\n        var $quantityArrowMinus = $(\".quantity-arrow-minus\");\n        var $quantityArrowPlus = $(\".quantity-arrow-plus\");\n        var $quantityNum = $(\".input-text.qty.text\");\n\n        if ($quantityArrowMinus.length && $quantityArrowPlus.length && $quantityNum.length) {\n            $quantityArrowMinus.on(\"click\", function (event) {\n                event.preventDefault();\n                quantityMinus();\n            });\n\n            $quantityArrowPlus.on(\"click\", function (event) {\n                event.preventDefault();\n                quantityPlus();\n            });\n        }\n\n        function quantityMinus() {\n            var currentValue = parseInt($quantityNum.val());\n            if (currentValue > 1) {\n                $quantityNum.val(currentValue - 1);\n            }\n        }\n\n        function quantityPlus() {\n            var currentValue = parseInt($quantityNum.val());\n            $quantityNum.val(currentValue + 1);\n        }\n    }\n\n    quantityProducts();\n});\n\n// Обработчик для кнопки \"Купить\"\n$(document).ready(function ($) {\n    $('.ajax_add_to_cart').on('click', function (e) {\n        e.preventDefault();\n\n        var $thisButton = $(this);\n        var product_id = $thisButton.data('product-id') || $thisButton.closest('form').data('product_id');\n        var quantity = $thisButton.siblings('.quantity').find('.qty').val() || 1;\n\n        var data = {\n            action: 'woocommerce_ajax_add_to_cart',\n            product_id: product_id,\n            quantity: quantity,\n        };\n\n        $.ajax({\n            type: 'POST',\n            url: custom_ajax_obj.ajax_url,\n            data: data,\n            beforeSend: function () {\n                $thisButton.addClass('loading');\n            },\n            complete: function () {\n                $thisButton.removeClass('loading');\n            },\n            success: function (response) {\n                if (response.error && response.product_url) {\n                    window.location = response.product_url;\n                    return;\n                } else {\n                    // Изменяем текст кнопки на \"В корзине\"\n                    $thisButton.find('.add-to-cart-text').text('В корзине');\n                    $thisButton.addClass('in-basket');\n                    // Обновление количества товаров в корзине\n                    updateCartCount();\n                }\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error('AJAX error:', textStatus, errorThrown);\n            }\n        });\n\n        return false;\n    });\n\n    // Обработчики для кнопок увеличения и уменьшения количества\n    $('.quantity-arrow-minus').click(function () {\n        var $qty = $(this).siblings('.quantity').find('.qty');\n        var currentVal = parseInt($qty.val());\n        if (!isNaN(currentVal) && currentVal > 1) {\n            $qty.val(currentVal - 1);\n        }\n    });\n\n    $('.quantity-arrow-plus').click(function () {\n        var $qty = $(this).siblings('.quantity').find('.qty');\n        var currentVal = parseInt($qty.val());\n        if (!isNaN(currentVal)) {\n            $qty.val(currentVal + 1);\n        }\n    });\n\n    // Обновление корзины при изменении количества\n    function updateCartCount() {\n        $.ajax({\n            url: custom_ajax_obj.ajax_url,\n            type: 'post',\n            data: {\n                action: 'update_cart_count'\n            },\n            success: function (response) {\n                $('.cart-count').text(response.data.cart_count);\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                console.error('Update cart count error:', textStatus, errorThrown);\n            }\n        });\n    }\n\n    // Добавляем событие на обновление корзины после изменения количества товаров\n    $(document).on('updated_cart_totals', function () {\n        updateCartCount();\n        console.log(\"Cart totals updated.\");\n    });\n});\n\n","document.getElementById('callbackButton').addEventListener('click', function() {\n    document.getElementById('callbackForm').style.display = 'block';\n});\n\ndocument.getElementById('closeCallbackForm').addEventListener('click', function() {\n    document.getElementById('callbackForm').style.display = 'none';\n});\n\ndocument.getElementById('callbackRequestForm').addEventListener('submit', function(event) {\n    event.preventDefault();\n    \n    var name = document.getElementById('callback-name').value;\n    var phone = document.getElementById('callback-phone').value;\n    var type = document.getElementById('callback-type').value;\n    \n    var data = new FormData();\n    data.append('name', name);\n    data.append('phone', phone);\n    data.append('type', type);\n    data.append('action', 'callback_request');\n    \n    fetch('/wp-admin/admin-ajax.php', {\n        method: 'POST',\n        body: data\n    })\n    .then(response => response.json())\n    .then(result => {\n        alert('Запрос на обратный звонок отправлен! Имя: ' + name + ', Телефон: ' + phone);\n        document.getElementById('callbackForm').style.display = 'none';\n    })\n    .catch(error => {\n        console.error('Ошибка:', error);\n        alert('Произошла ошибка при отправке запроса.');\n    });\n});\n"]}